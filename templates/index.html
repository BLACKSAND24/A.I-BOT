<!DOCTYPE html>
<html>
<head>
    <title>AI Trading Bot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h2>AI Crypto Trading Dashboard</h2>

    {% if error %}
    <div class="error-box">
        {{ error }}
    </div>
    {% endif %}

    <div class="price-box">
        <h1>${{ price }}</h1>
        <p>BTC/USDT</p>
        <button onclick="fetchPrice()">Refresh Price</button>
    </div>

    <div class="signal-box">
        <button onclick="getSignal()">Get Trading Signal</button>
        <p id="signal-display"></p>
    </div>

    <div class="order-box">
        <button class="buy-btn" onclick="placeOrder('buy')">BUY</button>
        <button class="sell-btn" onclick="placeOrder('sell')">SELL</button>
    </div>
</div>

<script>
function fetchPrice() {
    fetch("/price")
        .then(res => res.json())
        .then(data => alert("Price: " + data.price));
}
function getSignal() {
    fetch("/signal")
        .then(res => res.json())
        .then(data => document.getElementById("signal-display").innerText = "Signal: " + data.signal);
}
function placeOrder(side) {
    fetch("/order/" + side)
        .then(res => res.json())
        .then(data => alert(JSON.stringify(data)));
}
</script>
<!-- TradingView widget -->
<div class="tv-chart">
<iframe src="https://s.tradingview.com/widgetembed/?frameElementId=..." width="100%" height="400"></iframe>
</div>

</body>
</html>
